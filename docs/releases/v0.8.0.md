# Odyssey ERP v0.8.0 — Phase 8 Board Pack Release Notes

## Summary

Phase 8 memperkenalkan fitur **Board Pack Generator** — sistem otomatis untuk menghasilkan laporan eksekutif konsolidasi dalam format PDF. Board Pack mengumpulkan data finansial (P&L, Balance Sheet, KPIs) menjadi satu dokumen profesional yang siap dipresentasikan ke board of directors.

## New & Improved

### Board Pack Generator

- **Template System** — `board_pack_templates` table menyimpan template yang dapat dikustomisasi dengan sections yang berbeda (Executive Summary, P&L, Balance Sheet, KPIs, Variance Analysis).
- **Async Processing** — Board Pack generation diproses secara asynchronous via Asynq worker untuk menghindari timeout pada laporan kompleks.
- **PDF Output** — Professional PDF layout menggunakan Gotenberg dengan template HTML kustom (`templates/reports/boardpack_standard.html`).
- **Version Control** — Setiap Board Pack memiliki status lifecycle (DRAFT → GENERATING → COMPLETED → FAILED) dengan audit trail.

### UI & Navigation

- **SSR Pages** — Halaman list, create, detail, dan download untuk Board Pack tersedia di `/board-packs/*`.
- **Permission Protected** — Semua halaman dilindungi dengan permission `finance.boardpack`.
- **Navigation** — Entry "Board Pack" ditambahkan ke navbar di bawah Close & Insights.

### Configuration

- **Storage Path** — Environment variable `BOARD_PACK_STORAGE` menentukan direktori output PDF (default: `./var/boardpacks`).
- **Template Seeding** — Default template "Standard Executive Pack" otomatis di-seed saat setup.

## Breaking Changes

- **New Permission Required** — Akses Board Pack memerlukan permission `finance.boardpack`. Existing roles perlu di-update untuk mengakses fitur ini.

## Operations Checklist

1. Deploy v0.8.0 images dan jalankan migrasi database (`000010_phase8_board_pack`).
2. Pastikan Gotenberg instance berjalan dan `GOTENBERG_URL` terkonfigurasi.
3. Set `BOARD_PACK_STORAGE` ke direktori dengan write permission (default `./var/boardpacks`).
4. Jalankan seed script untuk menambahkan permission dan template default.
5. Assign permission `finance.boardpack` ke roles yang memerlukan akses.
6. Test generate Board Pack dengan data periode yang ada.

## Database Changes

```sql
-- New tables
CREATE TABLE board_pack_templates (
    id UUID PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    sections JSONB NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE board_packs (
    id UUID PRIMARY KEY,
    template_id UUID REFERENCES board_pack_templates(id),
    group_id UUID NOT NULL,
    period VARCHAR(7) NOT NULL,  -- YYYY-MM format
    status VARCHAR(20) NOT NULL, -- DRAFT, GENERATING, COMPLETED, FAILED
    file_path TEXT,
    generated_at TIMESTAMP,
    generated_by UUID,
    error_message TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);
```

## Known Issues

- Board Pack generation memerlukan data finansial yang lengkap untuk periode target. Pastikan data closing periode sudah selesai sebelum generate.
- Worker timeout untuk Board Pack kompleks (>50 entities) mungkin perlu adjustment via `ASYNQ_TASK_TIMEOUT`.

## Testing

- Unit test `internal/boardpack/builder_test.go` mencakup skenario dengan dan tanpa variance snapshot.
- Manual testing: create template → generate board pack → verify PDF output.

## Credits

Release Captain: implementasi Board Pack pipeline end-to-end.

Template Designer: layout PDF profesional untuk executive presentation.

QA Engineer: testing workflow dan edge cases.

---

**Full Changelog**: [CHANGELOG.md](../CHANGELOG.md#phase-8-cycle-83--board-pack)
