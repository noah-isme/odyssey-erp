# Odyssey ERP v0.7.0 — Phase 7 Final Release Notes

## Summary

Phase 7 graduates the consolidated Profit & Loss and Balance Sheet exporters to general availability. Warning propagation now matches across SSR banners, CSV metadata, and PDF captions, while the production PDF pipeline rides on Gotenberg v8 with hardened retries, timeout, and payload validation.

## New & Improved

- **Warning consistency** — Cached view-models persist warning lists so SSR, CSV (`X-Consol-Warning` + header comments), and PDF footers stay aligned.
- **PDF exporter** — Production build tag switches to the Gotenberg client with two retries, 10s timeout, and minimum size enforcement.
- **CSV streaming** — Buffered streaming keeps exports memory-safe and attaches metadata preamble for spreadsheet compatibility.
- **Runbook & tooling** — Operations runbook, `make export-demo`, and `make fx-tools` guide day-two teams across export, FX validation, and cache refresh.
- **Observability** — Exporters surface Prometheus metrics (`odyssey_consol_warnings_total`, latency, rate limits) and structured logs for incident forensics.

## Breaking changes

- Consolidated export endpoints now enforce `finance.export_consolidation` permission. Existing automation must authenticate with a role that holds this grant.
- Rate limiting tightened to 10 requests per minute per user. Batch export scripts should pace requests or handle HTTP 429 gracefully.

## Operations checklist

1. Deploy v0.7.0 images and ensure `GOTENBERG_URL` points to a reachable v8 instance.
2. Run database migrations (no schema changes in this release) to confirm state, then execute `go run ./scripts/seed/main.go` for RBAC defaults if on a fresh environment.
3. Trigger `make export-demo GROUP_ID=<group> PERIOD=<yyyy-mm>` to validate CSV/PDF exporters. Confirm warnings in SSR, CSV header comments, and PDF captions match.
4. Review Grafana dashboard `Consol / Exporters` for aligned warning counters and low error rates.
5. Update runbooks and Phase 8 planning documents with the new warning metrics and cache busting procedures.

## Known issues

- Export demo requires finance data seeded for the target group/period; use existing fixtures or coordinate with accounting for refreshed snapshots.
- When Gotenberg is unavailable the exporter returns `503` with `TimeoutError`; retry after verifying upstream availability.

## Credits

Release Captain: memastikan konsistensi warning, exporter, FX tools, caching, metrics, dan observability.

QA & Audit Engineer: finalisasi TESTING-PHASE7-S3.md, runbook, dan CHANGELOG.

Versioning & Release Engineer: tagging `v0.7.0` dan publikasi catatan rilis ini.

Handover Specialist: menyusun `docs/phase7-summary.md` untuk transisi Phase 8.
