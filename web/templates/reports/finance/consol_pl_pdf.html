{{ define "reports/finance/consol_pl_pdf.html" }}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Consolidated Profit &amp; Loss</title>
    <style>
        body { font-family: "Helvetica", Arial, sans-serif; font-size: 12px; color: #1f2933; }
        h1, h2 { margin-bottom: 8px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 16px; }
        th, td { border: 1px solid #d2d6dc; padding: 6px; text-align: left; }
        th.num, td.num { text-align: right; }
        .totals td { font-weight: bold; }
        .warnings { margin: 12px 0; padding: 8px; border: 1px solid #f7c948; background: #fff8e1; }
        .meta { margin-bottom: 12px; }
    </style>
</head>
<body>
    <h1>Consolidated Profit &amp; Loss</h1>
    <div class="meta">
        <p>Group ID {{ .Filters.GroupID }} &mdash; Period {{ .Filters.Period }} &mdash; FX {{ if .Filters.FxOn }}On{{ else }}Off{{ end }}</p>
    </div>
    {{ if .Warnings }}
    <div class="warnings">
        <strong>Peringatan:</strong>
        <ul>
            {{ range .Warnings }}<li>{{ . }}</li>{{ end }}
        </ul>
    </div>
    {{ end }}
    <h2>Totals</h2>
    <table class="totals">
        <tbody>
            <tr><td>Revenue</td><td class="num">{{ formatDecimal .Totals.Revenue }}</td></tr>
            <tr><td>COGS</td><td class="num">{{ formatDecimal .Totals.COGS }}</td></tr>
            <tr><td>Gross Profit</td><td class="num">{{ formatDecimal .Totals.GrossProfit }}</td></tr>
            <tr><td>Operating Expenses</td><td class="num">{{ formatDecimal .Totals.Opex }}</td></tr>
            <tr><td>Net Income</td><td class="num">{{ formatDecimal .Totals.NetIncome }}</td></tr>
            <tr><td>Delta FX</td><td class="num">{{ formatDecimal .Totals.DeltaFX }}</td></tr>
        </tbody>
    </table>
    <h2>Statement</h2>
    <table>
        <thead>
            <tr>
                <th>Section</th>
                <th>Account Code</th>
                <th>Account Name</th>
                <th class="num">Local Amount</th>
                <th class="num">Group Amount</th>
            </tr>
        </thead>
        <tbody>
            {{ range .Lines }}
            <tr>
                <td>{{ .Section }}</td>
                <td>{{ .AccountCode }}</td>
                <td>{{ .AccountName }}</td>
                <td class="num">{{ formatDecimal .LocalAmount }}</td>
                <td class="num">{{ formatDecimal .GroupAmount }}</td>
            </tr>
            {{ end }}
        </tbody>
    </table>
    <h2>Entity Contribution</h2>
    <table>
        <thead>
            <tr>
                <th>Entity</th>
                <th class="num">Group Amount</th>
                <th class="num">Contribution %</th>
            </tr>
        </thead>
        <tbody>
            {{ range .Contributions }}
            <tr>
                <td>{{ .EntityName }}</td>
                <td class="num">{{ formatDecimal .GroupAmount }}</td>
                <td class="num">{{ printf "%.2f" .Percent }}</td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</body>
</html>
{{ end }}
