{{ define "pages/reports/bs.html" }}
{{ template "layouts/base.html" . }}
{{ end }}

{{ define "title" }}Balance Sheet{{ end }}

{{ define "content" }}
{{ $data := .Data }}
<h1>Balance Sheet</h1>
<p class="contrast">Company: {{ $data.CompanyName }} · Period: {{ $data.PeriodLabel }} · Branch: {{ $data.BranchName }}</p>
<form method="get" class="grid">
    <label>
        Period
        <input type="month" name="period" value="{{ $data.FilterPeriod }}">
    </label>
    <label>
        Branch
        <input type="text" name="branch" value="{{ $data.FilterBranch }}" placeholder="All branches">
    </label>
    <label>
        Company
        <input type="text" name="company" value="{{ $data.FilterCompany }}" placeholder="All companies">
    </label>
    <div class="grid">
        <button type="submit">Apply</button>
        <a role="button" href="?">Reset</a>
    </div>
</form>
<div class="grid">
    <section>
        <h2>Assets</h2>
        <table>
            <tbody>
            {{ range $row := $data.Report.Assets.Accounts }}
                <tr>
                    <td>{{ $row.Code }} – {{ $row.Name }}</td>
                    <td class="numeric">{{ printf "%.2f" $row.Balance }}</td>
                </tr>
            {{ end }}
            </tbody>
            <tfoot>
                <tr>
                    <th>Total Assets</th>
                    <th class="numeric">{{ printf "%.2f" $data.Report.Assets.Total }}</th>
                </tr>
            </tfoot>
        </table>
    </section>
    <section>
        <h2>Liabilities</h2>
        <table>
            <tbody>
            {{ range $row := $data.Report.Liabilities.Accounts }}
                <tr>
                    <td>{{ $row.Code }} – {{ $row.Name }}</td>
                    <td class="numeric">{{ printf "%.2f" $row.Balance }}</td>
                </tr>
            {{ end }}
            </tbody>
            <tfoot>
                <tr>
                    <th>Total Liabilities</th>
                    <th class="numeric">{{ printf "%.2f" $data.Report.Liabilities.Total }}</th>
                </tr>
            </tfoot>
        </table>
    </section>
    <section>
        <h2>Equity</h2>
        <table>
            <tbody>
            {{ range $row := $data.Report.Equity.Accounts }}
                <tr>
                    <td>{{ $row.Code }} – {{ $row.Name }}</td>
                    <td class="numeric">{{ printf "%.2f" $row.Balance }}</td>
                </tr>
            {{ end }}
            </tbody>
            <tfoot>
                <tr>
                    <th>Total Equity</th>
                    <th class="numeric">{{ printf "%.2f" $data.Report.Equity.Total }}</th>
                </tr>
            </tfoot>
        </table>
    </section>
</div>
<p class="contrast"><strong>Total Liabilities &amp; Equity:</strong> {{ printf "%.2f" $data.Report.TotalLiabilitiesAndEquity }}</p>
<p><a role="button" href="/finance/reports/bs/pdf?period={{ $data.FilterPeriod }}&branch={{ $data.FilterBranch }}&company={{ $data.FilterCompany }}">Download PDF</a></p>
{{ end }}
